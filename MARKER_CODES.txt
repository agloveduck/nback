╔═══════════════════════════════════════════════════════════════════╗
║           Biosemi Trigger Marker 编码速查表                        ║
║                  N-back Practice 实验                              ║
╚═══════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────┐
│ 实验控制标记                                                      │
├──────────┬──────────────────────────────────────────────────────┤
│ Code     │ 描述                                                  │
├──────────┼──────────────────────────────────────────────────────┤
│   1      │ 实验开始                                              │
│ 255      │ 实验结束                                              │
└──────────┴──────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ Block 标记                                                        │
├──────────┬──────────────────────────────────────────────────────┤
│ Code     │ 描述                                                  │
├──────────┼──────────────────────────────────────────────────────┤
│  10      │ 0-back Block 开始                                     │
│  11      │ 1-back Block 开始                                     │
│  12      │ 2-back Block 开始                                     │
│  20      │ 0-back Block 结束                                     │
│  21      │ 1-back Block 结束                                     │
│  22      │ 2-back Block 结束                                     │
└──────────┴──────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ 刺激标记（Stimulus Onset）                                        │
├──────────┬──────────────────────────────────────────────────────┤
│ Code     │ 描述                                                  │
├──────────┼──────────────────────────────────────────────────────┤
│ 100      │ 0-back 非目标刺激                                     │
│ 101      │ 0-back 目标刺激                                       │
│ 110      │ 1-back 非目标刺激                                     │
│ 111      │ 1-back 目标刺激                                       │
│ 120      │ 2-back 非目标刺激                                     │
│ 121      │ 2-back 目标刺激                                       │
└──────────┴──────────────────────────────────────────────────────┘

编码规则：100 + (n × 10) + isTarget
  - n = 0/1/2 (block type)
  - isTarget = 0/1 (非目标/目标)

┌─────────────────────────────────────────────────────────────────┐
│ 反应标记（Response）                                              │
├──────────┬──────────────────────────────────────────────────────┤
│ Code     │ 描述                                                  │
├──────────┼──────────────────────────────────────────────────────┤
│ 200      │ 左键反应（错误）                                       │
│ 201      │ 左键反应（正确）                                       │
│ 210      │ 右键反应（错误）                                       │
│ 211      │ 右键反应（正确）                                       │
└──────────┴──────────────────────────────────────────────────────┘

编码规则：200/210 + isCorrect
  - 200系列 = 左键
  - 210系列 = 右键
  - +0 = 错误, +1 = 正确

┌─────────────────────────────────────────────────────────────────┐
│ 时间轴示例（单个trial）                                           │
└─────────────────────────────────────────────────────────────────┘

  0ms          500ms                     3000ms
   │─────────────│─────────────────────────│
   ↓             ↓                         ↓
 [刺激]      [清空屏幕]              [下一trial]
   │
   └─ Marker: 100-121 (刺激onset)
                  │
                  └─ 反应窗口 (2.5秒)
                       └─ Marker: 200/201/210/211 (如有反应)

┌─────────────────────────────────────────────────────────────────┐
│ EEG 分析建议                                                      │
└─────────────────────────────────────────────────────────────────┘

【Stimulus-locked ERP】
  - 使用 marker 100-121
  - 对比 target (xx1) vs non-target (xx0)
  - 对比不同难度 (0-back vs 1-back vs 2-back)

【Response-locked ERP】
  - 使用 marker 200/201/210/211
  - 对比 correct (xx1) vs incorrect (xx0)
  - 注意：无反应trial没有反应marker

【Block level】
  - 使用 marker 10-12 (block start)
  - 使用 marker 20-22 (block end)
  - 可分析block间差异

┌─────────────────────────────────────────────────────────────────┐
│ 注意事项                                                          │
└─────────────────────────────────────────────────────────────────┘

✓ 所有marker都会记录到 trigger_markers.log
✓ 刺激marker在 Screen('Flip') 后立即发送
✓ Marker持续时间：10ms（自动reset to 0）
✓ 无反应的trial只有刺激marker，没有反应marker
✓ 模拟模式下可在控制台实时查看marker发送

═══════════════════════════════════════════════════════════════════
